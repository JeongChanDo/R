setwd("~/GitHub/big_data/Python_R")
insurance = read.table("data/insurance.txt",header=T)
#명목형 변수로 바꾸기
#factor(변수지정,levels=범위,labels=라벨)
insurance$job = factor(insurance$job, levels=c(1:3),
labels=c("근로자","사무직","전문가"))
View(insurance)
View(insurance)
head(insurance)
#순서형 변수로 바꾸기
insurance$edu2 = ordered(insurance$edu,levels=c(1:5),
labels=c("무취학","초졸","중졸",
"고졸","대졸"))
head(insurance)
#막대 그래프 그리기
job.fraq = table(insurance$job)
#막대 그래프 그리기
job.freq = table(insurance$job)
job.freq
#2.막대 그리기
barplot(job.fraq)
title("막대 그래프: job")
install.packages("xlsx")
library(xlsx)
drug = read.xlsx("data/drug.xlsx",1)
#변수 변환
# 40세 이하 1, 41~ 60은 2, 60 초과는 3으로 변수 agr에 설정
drug$agr = drug$age
drug$agr[drug$agr >= 20 & drug$agr<= 40] = 1
drug$agr[drug$agr > 40 & drug$agr<= 60] = 2
drug$agr[drug$agr> 60] = 3
head(drug)
drug[c(1,20,40,95)]
drug[c(1,20,40,95),]
install.packages("car")
library(car)
drug$agr2 = drug$age
drug$agr2 = recode(drug$age,"lo:40=1;40:60=2;60:hi=3")
drug[c(1,20,40,95),]
#recode를 시킨 이후 그룹을 순서형으로 라벨을 주어야
#이해하기 좋다.
#그룹 변수 값을 순서형으로 바꾸기
drug$agr2 = ordered(drug$agr2,levels=C(1:3),
labels=c("Lo~40","40~60","60~Hi"))
#recode를 시킨 이후 그룹을 순서형으로 라벨을 주어야
#이해하기 좋다.
#그룹 변수 값을 순서형으로 바꾸기
drug$agr2 = ordered(drug$agr2,levels=c(1:3),
labels=c("Lo~40","40~60","60~Hi"))
agr2.freq=table(drug$agr2)
agr2.freq
#값 추출하기
select1 = insurance[insurance$sex=="m",]
head(slect1)
head(select1)
select2 = insurance[(insurance$sex="f" &
insurance$job ==2),]
select2 = insurance[which(insurance$sex="f" &
insurance$job==2),]
select2 = insurance[which(insurance$sex="f" &
insurance$job==2),]
select2 = insurance[which(insurance$sex="f" &insurance$job==2),]
select2 = insurance[which(insurance$sex=="f"&insurance$job==2),]
select2 = insurance[which(insurance$sex=="f"&
insurance$job==2),]
head(select2)
head(select1)
select2 = insurance[which(insurance$sex=="f"&
insurance$job==2),]
head(select2)
View(insurance)
View(insurance)
insurance = read.table("data/insurance.txt",header=T)
#값 추출하기
select1 = insurance[insurance$sex=="m",]
head(select1)
select2 = insurance[which(insurance$sex=="f"&
insurance$job==2),]
head(select2)
library(dplyr)
insurance = read.table("data/insurance.txt",header=T)
dim(insurance)
tbl_df(insurance)
# sex = m 이고 edu=3인 추출
sel1 = filter(insurance, sex=='m', edu==3)
sel1
sel2
# sel = m 이거나 edu=3추출
sel2 = filter(insurance, sex='m' | edu==3)
sel2
# sel = m 이거나 edu=3추출
sel2 = filter(insurance, sex=='m' | edu==3)
sel2
head(sel2)
head(sel1)
head(sel2)
sel3 = select(insurance, sex, job, amount, salary)
head(sel3)
sel4 = filter(select(insurance,sex, job, amount, salary), job==1)
head(sel4)
sel5 = select(insurance, job:salary)
head(sel5)
insu_add = mutate(insurance, amopersal = amount/salary)
head(insu_add)
#정렬하기
# 성별, 직업 기준 오름차순
sel3_asc = arrange(sel3, sex, job)
head(sel3_asc)
# 성별, 직업 기준 내림차순
sel3_desc =arange(sel3,desc(sex), desc(job))
# 성별, 직업 기준 내림차순
sel3_desc =arrange(sel3,desc(sex), desc(job))
head(sel3_De)
head(sel3_asc)
head(sel3_desc)
ins_job = arrange(insurance, job)
ins_job_g = group_by(ins_job, job)
ins_job_gm = summarise(ins_job_g, amMean =mean(amount),aSal=mean(salary))
head(ins_job_gm)
ins = insurance %>%
select(amount,salary) %>%
filter(salary > 130)
ins
#mtcar 데이터 처리 예제
head(mtcar,3)
#mtcar 데이터 처리 예제
head(mtcars)
mtcars %>% filter(am == 0) %>%
group_by(carb) %>%
summarise(mean(mpg))
mtcars %>% filter(gear !=5) %>% group_by(gear) %>%
summarize(Avg_mpg = mean(mpg),
Meadian_hp = as.numeric(median(hp)),
Count=n()) %>%
arrange(desc(Count))
#nycflights13 데이터 처리 예제
install.packages("nycflights13")
library(nycflights13)
ls("package:nycflight13")
ls("package:nycflights13")
dim(flights)
tbl_df(flights)
not_cancelled <- flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay))
head(not_cancelled)
# 출발, 도착이 지연되지 않은 경우
not_delayed <- flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay))
head(not_delayed)
